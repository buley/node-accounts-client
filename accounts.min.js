var Accounts=function(){var b={},p={},t=0,u;b.connected=!1;b.attributes="birthdate description email id image locale location name profile_url username personal_url stats".split(" ");b.prefix="accounts";b.allServices="facebook google linkedin twitter windows foursquare yahoo github tumblr instagram wordpress vimeo youtube blogger evernote reddit soundcloud".split(" ");b.debug=!1;b.unhelpfulErrorMessage="Something went awry.";b.activeServices=[];u=b.allServices.length;for(t=0;t<u;t+=1)b[b.allServices[t]]=
{};b.api={};b.api.request=function(a){var c=[b.base,b.prefix,a.action,a.service].join("/"),d=function(c,d){null===c&&b.publish(d.request.action,d.response);"function"===typeof a.callback?a.callback.apply(this,arguments):null===c&&"function"===typeof a.success?a.success.apply(this,[d]):null!==c&&"function"===typeof a.error&&a.error.apply(this,[c])};if("confirm"===a.action)this.post(c,{code:a.code,oauth_token:a.oauth_token,oauth_verifier:a.oauth_verifier,oauth_token_secret:a.oauth_token_secret},d,{});
else if("login"===a.action)this.put(c,{request_token:a.request_token,request_token_secret:a.request_token_secret},d,{});else if("logout"===a.action)this["delete"](c,{access_token:a.access_token},d,{});else"proxy"===a.action?this.post(c,{access_token:a.access_token,access_token_secret:a.access_token_secret,url:a.url,method:a.method,body:a.body,type:a.type},d,{}):this.get(c,{access_token:a.access_token,refresh_token:a.refresh_token},d,{})};b.api.get=function(a,c,d,e){e=e||{};var g=this;b.api.ajax({type:"GET",
url:a,headers:e,data:c,success:function(a){var b=null;a=a.response;try{a=JSON.parse(a)}catch(c){b=c}finally{d.apply(g,[b,a])}},error:function(a){d.apply(g,[Error(b.unhelpfulErrorMessage),null])}})};b.api.put=function(a,c,d,e){e=e||{};var g=this;b.api.ajax({type:"PUT",url:a,data:c,headers:e,success:function(a){var b=null;a=a.response;try{a=JSON.parse(a)}catch(c){b=c}finally{d.apply(g,[b,a])}},error:function(a){d.apply(g,[Error(b.unhelpfulErrorMessage),null])}})};b.api.post=function(a,c,d,e){e=e||{};
var g=this;b.api.ajax({type:"POST",url:a,data:c,headers:e,success:function(a){var b=null;a=a.response;try{a=JSON.parse(a)}catch(c){b=c}finally{d.apply(g,[b,a])}},error:function(a){d.apply(g,[Error(b.unhelpfulErrorMessage),null])}})};b.api["delete"]=function(a,c,d,e){e=e||{};var g=this;b.api.ajax({type:"DELETE",url:a,data:c,headers:e,success:function(a){var b=null;a=a.response;try{a=JSON.parse(a)}catch(c){b=c}finally{d.apply(g,[b,a])}},error:function(a){d.apply(g,[Error(b.unhelpfulErrorMessage),null])}})};
b.api.ajax=function(a){var b,d=(d||"").toUpperCase(),e=this;b="undefined"!==typeof window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");b.onreadystatechange=function(){4===b.readyState&&(200===b.status?"function"===typeof a.success&&a.success.apply(e,[b]):"function"===typeof a.success&&a.error.apply(e,[b]))};"string"!==typeof a.data&&(a.data=JSON.stringify(a.data));b.open(a.type,a.url,!0);b.setRequestHeader("Content-Type","application/json");b.send(a.data)};b.getActiveServices=
function(){return b.activeServices.slice(0)};b.setActiveServices=function(a){return b.activeServices=a};b.addActiveService=function(a){if("string"!==typeof a)return!1;for(var c=b.activeServices,d=0,e=c.length,d=0;d<e;d+=1)if(a===c[d])return!1;b.activeServices.push(a);return!0};b.removeActiveService=function(a){if("string"!==typeof a)return!1;for(var b=[],d=!1,e=0,g=services.length,f,e=0;e<g;e+=1)f=services[e],a===f?d=!0:b.push(f);return d};var f=function(a){var c=a.services,d=a.redirect;a=a.base;
"undefined"!==typeof c&&null!==c?b.setActiveServices(c):f.prototype.enable();b.redirectTo="undefined"!==typeof d?d:document.location.pathname;b.base="undefined"!==typeof a?a:null;b.detectLogin(this.redirect);b.confirm()};f.prototype.display=function(a){var b=a;switch(a){case "facebook":b="Facebook";break;case "twitter":b="Twitter";break;case "github":b="Github";break;case "google":b="Google+";break;case "tumblr":b="Tumblr";break;case "yahoo":b="Yahoo";break;case "foursquare":b="Foursquare";break;
case "linkedin":b="Linkedin";break;case "windows":b="Windows Live";break;case "evernote":b="Evernote";break;case "instagram":b="Instagram";break;case "vimeo":b="Vimeo";break;case "blogger":b="Blogger";break;case "wordpress":b="WordPress";break;case "reddit":b="Reddit";break;case "youtube":b="YouTube";break;case "soundcloud":b="SoundCloud"}return b};f.prototype.enable=function(a){b.publish("enable",a);return"undefined"===typeof a||null===a?b.setActiveServices(b.allServices):b.addActiveService(a)};
f.prototype.enabled=function(a){if("undefined"===typeof a||null===a)return b.getActiveServices();for(var c=b.activeServices,d=0,e=c.length,d=0;d<e;d+=1)if(a===c[d])return!0;return!1};f.prototype.disabled=function(a){if("undefined"===typeof a||null===a){a=b.getActiveServices();for(var c=b.getActiveServices(),d=0,e=a.length,g=c.length,h=[],l=!0,d=0;d<g;d+=1){l=!0;for(y=0;y<e;y+=1)a[0]===c[d]&&(l=!1);!0===l&&h.push(c[d])}return h}return!f.prototype.enabled(a)};f.prototype.disable=function(a){b.publish("disable",
a);return"undefined"!==typeof a||null===a?b.setActiveServices([]):b.removeActiveService(a)};f.prototype.connected=function(){return b.connected?!0:!1};f.prototype.disconnected=function(){return!this.connected()};f.prototype.authenticated=function(a){return b.authenticated(a)};f.prototype.token=function(a){return b.getAccessToken(a)};f.prototype.tokens=function(){return b.getAccessTokens()};f.prototype.ids=function(){return b.getProfileIds()};f.prototype.id=function(a){return b.getId(a)};f.prototype.secret=
function(a){return b.getAccessTokenSecret(a)};f.prototype.secrets=function(){return b.getAccessTokenSecrets()};f.prototype.profile=function(a){return b.getProfile(a)};f.prototype.map=function(){return b.getAllProfileAttributesMap.apply(this,arguments)};f.prototype.services=function(){return b.allServices};f.prototype.pick=function(a,c){var d=a.split(".");if("undefined"!==typeof d[1])b.picked[d[0]]=b.picked[d[0]]||{},b.picked[d[0]][d[1]]=c;else if(b.picked[d[0]]=c,"profile_url"===a)for(var e=this.map(!0),
d=0,e=e.username,g=e.length,f;d<g;d+=1)f=e[d],f.service===c.service&&(b.picked.username=f);else if("username"===a)for(e=this.map(!0),d=0,e=e.profile_url,g=e.length;d<g;d+=1)f=e[d],f.service===c.service&&(b.picked.profile_url=f);b.storage.local.set("profile_picks",b.picked);return b.picked};f.prototype.chosen=function(){return b.getAllProfileAttributesChosen()};f.prototype.common=function(a){return b.getAllProfileAttributesCommon(a)};f.prototype.options=function(){return b.getAllProfileAttributes()};
f.prototype.profiles=function(){return b.getProfiles()};f.prototype.status=function(){return b.login_statuses()};f.prototype.login=function(a){return f.prototype.session(a)};f.prototype.proxy=function(a){return b.proxy(a.service,a.url,a.callback,a.method,a.body,a.type)};f.prototype.session=function(a){b.publish("session",{service:a});return f.prototype.enabled(a)?(b.publish("sessioning",{service:a}),b.do_login(a)):!1};f.prototype.logout=function(a){return f.prototype.unsession(a)};f.prototype.unsession=
function(a){b.publish("unsession",{service:a});return f.prototype.enabled(a)?(b.publish("unsessioning",{service:a}),b.do_logout(a)):!1};f.prototype.subscribe=function(a,c,d){if("undefined"===typeof a||null===a||"function"!==typeof c)return!1;b.publish("subscribe",{event:a,callback:c,id:d});if(null===d||"undefined"===typeof d){var e="",g;for(g=0;5>g;g++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()))}"undefined"===typeof p[a]&&(p[a]={});p[a][d]=
c;b.publish("subscribed",{event:a,callback:c,id:d});return d};f.prototype.unsubscribe=function(a,c){b.publish("unsubscribe",{event:a,id:c});if("undefined"===typeof a||null===a)return!1;var d=p[a];return"undefined"!==typeof d&&null!==d&&"undefined"!==typeof d[c]?(delete p[a][c],b.publish("unsubscribed",{event:a,id:c}),c):!1};b.publish=function(a,c){var d=p[a],e;if("undefined"===typeof a||null===a||"undefined"===typeof d||null===d)return!1;"login"!==a&&"confirm"!==a||b[c.service].account_request(c);
for(id in d)e=d[id],"function"===typeof e&&!0===d.hasOwnProperty(id)&&e({event:a,data:c})};b.connect=function(a,c){if(f.prototype.disabled(a))return!1;var d={action:"connect"};1===c?(d.access_token=b.storage.session.get(a+"_access_token"),d.access_token_secret=b.storage.session.get(a+"_access_token_secret")):2===c&&(d.access_token=b.storage.session.get(a+"_access_token"),d.refresh_token=b.storage.session.get(a+"_refresh_token"));"undefined"!==typeof d.access_token&&null!==d.access_token&&(d.service=
a,b.publish("connect",{service:a,oauth_type:c}),b.api.request(d))};b.getId=function(a){return f.prototype.disabled(a)?null:b.getProfileIds()[a]};b.getStats=function(a){return f.prototype.disabled(a)?null:b.getProfileStats()[a]};b.getUrl=function(a){return f.prototype.disabled(a)?null:b.getProfileURLs()[a]};b.getPersonalUrl=function(a){return f.prototype.disabled(a)?null:b.getProfilePersonalURLs()[a]};b.getImage=function(a){return f.prototype.disabled(a)?null:b.getProfileImages()[a]};b.getUsername=
function(a){return f.prototype.disabled(a)?null:b.getProfileUsernames()[a]};b.getIds=function(a){return f.prototype.disabled(a)?null:b.getProfileIds()[a]};b.getBirthdate=function(a){return f.prototype.disabled(a)?null:b.getProfileBirthdates()[a]};b.getDescription=function(a){return f.prototype.disabled(a)?null:b.getProfileDescriptions()[a]};b.getEmail=function(a){return f.prototype.disabled(a)?null:b.getProfileEmails()[a]};b.getGender=function(a){return f.prototype.disabled(a)?null:b.getProfileGenders()[a]};
b.getLocale=function(a){return f.prototype.disabled(a)?null:b.getProfileLocales()[a]};b.getLocation=function(a){return f.prototype.disabled(a)?null:b.getProfileLocations()[a]};b.getName=function(a){return f.prototype.disabled(a)?null:b.getProfileNames()[a]};b.getUrls=function(a){return f.prototype.disabled(a)?null:b.getProfileUrls()[a]};b.getUsernames=function(){return f.prototype.disabled(type)?null:b.getProfileUsernames()[type]};b.getProfileAttributeByService=function(a,c){var d;switch(c){case "id":d=
b.getId(a);break;case "username":d=b.getUsername(a);break;case "profile_url":d=b.getUrl(a);break;case "personal_url":d=b.getPersonalUrl(a);break;case "name":d=b.getName(a);break;case "location":d=b.getLocation(a);break;case "stats":d=b.getStats(a);break;case "locale":d=b.getLocale(a);break;case "image":d=b.getImage(a);break;case "gender":d=b.getGenders(a);break;case "email":d=b.getEmail(a);break;case "description":d=b.getDescription(a);break;case "birthdate":d=b.getBirthdate(a)}return d};b.getAllProfileAttributes=
function(){for(var a="birthdate description email id image locale location name profile_url username personal_url stats".split(" "),c=a.length,d,e=0,g={};e<c;e+=1)d=a[e],g[d]=b.getAllByProfileAttribute(d);return g};b.getAllProfileAttributesPickDefaults=function(){var a=b.getAllProfileAttributesMap(),c=null,d={},e=function(a){a.sort(function(a,c){for(var d=0,e=b.allServices.length,g;d<e;d+=1)g=b.allServices[d],a.service===g&&(a=d),c.service===g&&(c=d);return a>c?1:a===c?0:-1});return a[0]},g=function(a,
b){for(var c=0,d=a.length,e=null,g={};c<d;c+=1)e=a[c],g[e.value]="undefined"===typeof g[e.value]?1:g[e.value]+1;var c=-Infinity,e=Infinity,f;for(f in g)g.hasOwnProperty(f)&&(d=g[f],d<e&&(e=d),d>c&&(c=d));e=[];for(f in g)if(g.hasOwnProperty(f)&&(d=g[f],d===c))for(att2 in a)a.hasOwnProperty(att2)&&(val2=a[att2],val2.value===f&&e.push(val2));return e},f=function(a,b){for(var c=0,d=a.length,g=null,f={};c<d;c+=1){var g=a[c],h,k,n=g.value;for(k in n)!0===n.hasOwnProperty(k)&&(h=n[k]||"",""!==h&&null!==
h&&"undefined"!==typeof h&&(f[k]=f[k]||{},"undefined"===typeof f[k][h]&&(f[k][h]=1),f[k][h]++))}var p={};for(k in f)if(!0===f.hasOwnProperty(k))for(h in c=Infinity,g=-Infinity,n=f[k],n)if(n.hasOwnProperty(h)){var r=f[k][h];"undefined"!==typeof r&&(r<c&&null!==h&&""!==h&&(c=r),r>g&&null!==h&&""!==h&&(g=r,p[k]=r))}h={};for(var s=[],c=0;c<d;c+=1)for(k in g=a[c],n=g.value,n)!0===n.hasOwnProperty(k)&&"undefined"!==typeof f[k]&&(r=f[k][g.value[k]],s[k]=s[k]||[],"undefined"!==typeof r&&r===p[k]&&s[k].push({service:g.service,
value:g.value[k]}),0===s[k].length&&delete s[k]);for(c=0;c<d;c+=1)for(k in g=a[c],n=g.value,n)!0===n.hasOwnProperty(k)&&(h[k]="undefined"===typeof s[k]||null===s[k]?[]:e(s[k]),0===h[k].length&&(h[k]=null));return h};for(c in a)a.hasOwnProperty(c)&&("id"===c?d.ids=a[c]:"stats"===c?d.stats=a[c]:d[c]="name"===c?f(a[c],c):"birthdate"===c?f(a[c],c):e(g(a[c],c)));return d};b.getAllProfileAttributesCommon=function(a){for(var c=0,d=b.attributes.length,e,g={};c<d;c+=1)if(e=b.attributes[c],"name"===e||"birthdate"===
e){var f,l=b.getProfileAttributeByService(a,e),m={};for(f in l)!0===l.hasOwnProperty(f)&&(m[f]={service:a,value:l[f]});g[e]=m}else g[e]={service:a,value:b.getProfileAttributeByService(a,e)};g.authenticated=b.authenticated(a);return g};b.getAllProfileAttributesChosen=function(){var a=b.getAllProfileAttributesPickDefaults(),c=b.picked||{},d;for(d in a)if(!0===a.hasOwnProperty(d))if("name"===d||"birthdate"===d)for(var e in a[d])!0===a[d].hasOwnProperty(e)&&"undefined"!==typeof c[d]&&"undefined"!==typeof c[d][e]&&
(a[d][e]=c[d][e]);else"undefined"!==typeof c[d]&&(a[d]=c[d]);return a};b.getAllProfileAttributesMap=function(a){for(var c=b.attributes,d=c.length,e,g=0,f={};g<d;g+=1)e=c[g],f[e]=b.getAllByProfileAttributeMap(e,a);return f};b.getAllByProfileAttribute=function(a){var c=b.getUnifiedProfiles(),d,e=[];for(service in c)d=c[service],null!==d&&(d=b.getProfileAttributeByService(service,a),null!==d&&e.push(d));e.push({service:null,value:null});return e};b.getAllByProfileAttributeMap=function(a,c){var d=b.getUnifiedProfiles(),
e,g=[];for(service_slug in d){var f=service_slug;e=d[f];null!==e&&(e=b.getProfileAttributeByService(f,a),null!==e&&g.push({service:f,value:e}))}if(!0===c&&("name"===a||"birthdate"===a)){d={name:{},birthdate:{}};f=0;e=g.length;for(var l,m;f<e;f+=1)for(att in l=g[f],m=l.value,m)m.hasOwnProperty(att)&&(d[a]=d[a]||{},d[a][att]=d[a][att]||[],d[a][att].push({service:l.service,value:m[att]}));g=d[a]}return g};b.authenticated=function(a){a=f.prototype.token(a);return null===a||"undefined"===typeof a?!1:!0};
b.getAccessTokens=function(){for(var a=b.getActiveServices(),c=0,d=a.length,e,g={},c=0;c<d;c+=1)e=a[c],g[e]=b.getAccessToken(e);return g};b.getAccessToken=function(a){if(f.prototype.disabled(a))return null;var c=null;switch(a){case "facebook":c=b.storage.local.get("facebook_access_token");break;case "twitter":c=b.storage.local.get("twitter_access_token");break;case "foursquare":c=b.storage.local.get("foursquare_access_token");break;case "google":c=b.storage.local.get("google_access_token");break;
case "windows":c=b.storage.local.get("windows_access_token");break;case "tumblr":c=b.storage.local.get("tumblr_access_token");break;case "wordpress":c=b.storage.local.get("wordpress_access_token");break;case "instagram":c=b.storage.local.get("instagram_access_token");break;case "vimeo":c=b.storage.local.get("vimeo_access_token");break;case "github":c=b.storage.local.get("github_access_token");break;case "yahoo":c=b.storage.local.get("yahoo_access_token");break;case "linkedin":c=b.storage.local.get("linkedin_access_token");
break;case "reddit":c=b.storage.local.get("reddit_access_token");break;case "youtube":c=b.storage.local.get("youtube_access_token");break;case "blogger":c=b.storage.local.get("blogger_access_token");break;case "evernote":c=b.storage.local.get("evernote_access_token");break;case "soundcloud":c=b.storage.local.get("soundcloud_access_token")}return c};b.setAccessToken=function(a,c){return f.prototype.disabled(a)||"undefined"===typeof a||"undefined"===typeof c||null===a||null===c?!1:b.storage.local.set(a+
"_access_token",c)};b.getAccessTokenSecrets=function(){for(var a=b.getActiveServices(),c=0,d=a.length,e,g={},c=0;c<d;c+=1)e=a[c],g[e]=b.getAccessTokenSecret(e);return g};b.getAccessTokenSecret=function(a){if(f.prototype.disabled(a))return!1;var c=null;switch(a){case "facebook":c=b.storage.local.get("facebook_access_token_secret");break;case "twitter":c=b.storage.local.get("twitter_access_token_secret");break;case "foursquare":c=b.storage.local.get("foursquare_access_token_secret");break;case "google":c=
b.storage.local.get("google_access_token_secret");break;case "tumblr":c=b.storage.local.get("tumblr_access_token_secret");break;case "windows":c=b.storage.local.get("windows_access_token_secret");break;case "github":c=b.storage.local.get("github_access_token_secret");break;case "linkedin":c=b.storage.local.get("linkedin_access_token_secret");break;case "yahoo":c=b.storage.local.get("yahoo_access_token_secret");break;case "wordpress":c=b.storage.local.get("wordpress_access_token_secret");break;case "instagram":c=
b.storage.local.get("instagram_access_token_secret");break;case "vimeo":c=b.storage.local.get("vimeo_access_token_secret");break;case "reddit":c=b.storage.local.get("reddit_access_token_secret");break;case "youtube":c=b.storage.local.get("youtube_access_token_secret");break;case "blogger":c=b.storage.local.get("blogger_access_token_secret");break;case "soundcloud":c=b.storage.local.get("soundcloud_access_token_secret");break;case "evernote":c=b.storage.local.get("evernote_access_token_secret")}return c};
b.setAccessTokenSecret=function(a,c){if(f.prototype.disabled(a)||"undefined"===typeof a||"undefined"===typeof c||null===a||null===c)return!1;b.storage.local.set(a+"_access_token_secret",c)};b.getProfiles=function(){return b.getUnifiedProfiles()};b.getProfile=function(a){return f.prototype.enabled(a)?"undefined"===typeof a||null===a?b.getUnifiedProfile():b.storage.local.get(a+"_profile"):!1};b.setProfile=function(a,c){return f.prototype.disabled(a)||"undefined"===typeof a||"undefined"===typeof c||
null===a||null===c?!1:b.storage.local.set(a+"_profile",c)};b.getProfileIds=function(){var a=b.getUnifiedProfiles(),c,d,e={};for(service in a)if(c=a[service],null!==c){d=null;switch(service){case "facebook":d=parseInt(c.id,10);break;case "foursquare":d=parseInt(c.id,10);break;case "github":d=c.id;break;case "google":d=parseInt(c.id,10);break;case "linkedin":d=c.id;break;case "tumblr":d=null;break;case "windows":d=c.id;break;case "twitter":d=parseInt(c.id_str,10);break;case "yahoo":d=c.guid;break;case "instagram":d=
c.id;break;case "wordpress":d=c.ID;break;case "vimeo":d=c.id;break;case "youtube":d=c.id;break;case "reddit":d=c.id;break;case "soundcloud":d=c.id}e[service]="undefined"!==typeof d&&""!==d?d:null}else e[service]=null;return e};b.getProfileNames=function(){var a=b.getUnifiedProfiles(),c,d={},e={};for(service in a){c=a[service];d={display:null,first:null,last:null};if(null!==c)switch(service){case "facebook":d.display=c.name;d.first=c.first_name;d.last=c.last_name;break;case "foursquare":d.first=c.firstName;
d.last=c.lastName;break;case "github":d.display=c.name;break;case "google":d.display=c.displayName;d.first=c.name.givenName;d.last=c.name.familyName;break;case "linkedin":d.display=c.formattedName;d.first=c.firstName;d.last=c.lastName;break;case "tumblr":d=null;break;case "twitter":d.display=c.name;break;case "yahoo":d=null;break;case "windows":d.display=c.name;d.first=c.first_name;d.last=c.last_name;break;case "instagram":d.display=c.full_name;break;case "wordpress":d.display=c.display_name;break;
case "vimeo":d.display=c.display_name;break;case "youtube":d.display=c.snippet.title;break;case "blogger":d=null;break;case "reddit":d=null;break;case "soundcloud":d.display=c.full_name;default:d=null}e[service]="undefined"!==typeof d&&""!==d?d:null}return e};b.getProfileGenders=function(){var a=b.getUnifiedProfiles(),c,d,e={};for(service in a){c=a[service];d=null;if(null!==c)switch(service){case "facebook":d=c.gender;break;case "foursquare":d=c.gender;break;case "google":d=c.gender;break;case "windows":d=
c.gender;break;case "yahoo":d="M"===c.gender?"male":"F"===c.gender?"female":c.gender}e[service]="undefined"!==typeof d&&""!==d?d:null}return e};b.getProfileBirthdates=function(){var a=b.getUnifiedProfiles(),c,d={},e={};for(service in a){c=a[service];d={day:null,month:null,year:null};if(null!==c)switch(service){case "facebook":"undefined"!==typeof c.birthday&&null!==c.birthday?(d.day=(new Date(c.birthday)).getDate(),d.month=(new Date(c.birthday)).getMonth()+1,d.year=(new Date(c.birthday)).getFullYear()):
d=null;break;case "foursquare":d=null;break;case "github":d=null;break;case "google":d=null;break;case "linkedin":d=null;break;case "tumblr":d=null;break;case "twitter":d=null;break;case "windows":null!==c.birth_day||null!==c.birth_month||null!==c.birth_year?(d.day=c.birth_day,d.month=c.birth_month,d.year=c.birth_year):d=null;break;case "yahoo":"undefined"!==typeof c.birthYear&&null!==c.birthYear?d.year=c.birthYear:d=null;break;case "instagram":d=null;break;case "wordpress":d=null;break;case "vimeo":d=
null;break;case "youtube":d=null;break;case "blogger":d=null;break;case "reddit":d=null;break;case "soundcloud":d=null;break;default:d=null}e[service]="undefined"!==typeof d&&""!==d?d:null}return e};b.getProfileImages=function(){var a=b.getUnifiedProfiles(),c={},d,e={};for(service in a){c=a[service];d=null;if(null!==c)switch(service){case "foursquare":d=c.photo;break;case "github":d=c.avatar_url;break;case "google":d=c.image.url;break;case "linkedin":d=c.pictureUrl;break;case "twitter":d=c.profile_image_url;
break;case "yahoo":d=c.image.imageUrl;break;case "instagram":d=c.profile_picture;break;case "wordpress":d=c.avatar_URL;break;case "vimeo":d=c.portraits.portrait[c.portraits.portrait.length-1]._content;break;case "youtube":d=c.snippet.thumbnails.high.url;break;case "soundcloud":d=c.avatar_url}e[service]="undefined"!==typeof d&&""!==d?d:null}return e};b.getProfilePersonalURLs=function(){var a=b.getUnifiedProfiles(),c,d,e={};for(service in a){c=a[service];d=null;if(null!==c)switch(service){case "facebook":d=
c.website;break;case "github":d=c.blog;break;case "twitter":d=c.url;break;case "instagram":d=c.website;break;case "vimeo":d=c.url[0];break;case "soundcloud":d=c.website}e[service]="undefined"!==typeof d&&""!==d?d:null}return e};b.getProfileStats=function(){var a=b.getUnifiedProfiles(),c,d,e={};for(service in a){c=a[service];d=null;if(null!==c)switch(service){case "facebook":d={updated:c.updated_time,created:null};break;case "foursquare":d={todos:c.todos.count,tips:c.tips.count,mayorships:c.mayorships.count,
checkins:c.checkins.count,badges:c.badges.count,friends:c.friends.count,following:c.following.count,incoming:c.following.count+c.friends.count,outgoing:c.friends.count,created:c.createdAt,updated:null};break;case "github":d={followers:c.followers,following:c.following,public_gists:c.public_gists,public_repos:c.public_repos,created:c.created_at,updated:c.updated_at};break;case "linkedin":d={connections:c.numConnections,created:null,updated:null};break;case "tumblr":d=0;for(var g=c.blogs.length,f,l=
0,m=0,q=0;d<g;d+=1)f=c.blogs[d],l+=f.posts,m+=f.followers,q+=f.messages;d={following:c.following,likes:c.likes,posts:l,followers:m,messages:q,created:null,updated:null};break;case "twitter":d={created:c.created_at,updated:null,statuses_count:c.statuses_count,listed_count:c.listed_count,friends_count:c.friends_count,followers_count:c.followers_count,favorites_count:c.favorites_count};break;case "yahoo":d={created:c.memberSince,updated:c.updated};break;case "instagram":d={followed_by:c.counts.followed_by,
follows:c.counts.follows,media:c.counts.media,created:null,updated:null};break;case "vimeo":d={created:c.created_on,updated:null,number_of_albums:c.number_of_albums,number_of_channels:c.number_of_channels,number_of_contacts:c.number_of_contacts,number_of_groups:c.number_of_groups,number_of_likes:c.number_of_likes,number_of_uploads:c.number_of_uploads,number_of_videos:c.number_of_videos,number_of_videos_appears_in:c.number_of_videos_appears_in};break;case "youtube":d={comment_count:c.statistics.commentCount,
subscriber_count:c.statistics.subscriberCount,video_count:c.statistics.videoCount,view_count:c.statistics.viewCount,created:c.snippet.publishedAt,updated:null};break;case "reddit":d={comment_karma:c.comment_karma,link_karma:c.link_karma,created:c.created,updated:null};break;case "soundcloud":d={followers_count:c.followers_count,followings_count:c.followings_count,subscriptions:c.subscriptions,public_favorites_count:c.public_favorites_count,track_count:c.track_count,playlist_count:c.playlist_count,
private_tracks_count:c.private_tracks_count,private_playlists_count:c.private_playlists_count}}e[service]="undefined"!==typeof d&&""!==d?d:null}return e};b.getProfileURLs=function(){var a=b.getUnifiedProfiles(),c,d,e={};for(service in a){c=a[service];d=null;if(null!==c)switch(service){case "facebook":d=c.link;break;case "foursquare":d="https://foursquare.com/user/"+c.id;break;case "github":d=c.html_url;break;case "google":d=c.url;break;case "linkedin":d=c.publicProfileUrl;break;case "tumblr":d="http://"+
c.name+".tumblr.com/";break;case "twitter":d="http://twitter.com/#!/"+c.screen_name;break;case "yahoo":d=c.profileUrl;break;case "windows":d="https://profile.live.com/cid-"+c.id;break;case "instagram":d="http://instagram.com/"+c.username;break;case "wordpress":prifile_url=c.profile_URL;break;case "vimeo":d=c.profileurl;break;case "youtube":d="http://www.youtube.com/channel/"+c.id;break;case "reddit":d="http://www.reddit.com/user/"+c.name;break;case "soundcloud":d="http://soundcloud.com/"+c.username}e[service]=
"undefined"!==typeof d&&""!==d?d:null}return e};b.getProfileEmails=function(){var a=b.getUnifiedProfiles(),c,d,e={};for(service in a){c=a[service];d=null;if(null!==c)switch(service){case "facebook":d=c.email;break;case "foursquare":d=c.contact.email;break;case "github":d=c.email;break;case "windows":d=c.emails.preferred;break;case "wordpress":d=c.email}e[service]="undefined"!==typeof d&&""!==d?d:null}return e};b.getProfileUsernames=function(){var a=b.getUnifiedProfiles(),c,d,e={};for(service in a){c=
a[service];d=null;if(null!==c)switch(service){case "facebook":d=c.username;break;case "github":d=c.login;break;case "tumblr":d=c.name;break;case "twitter":d=c.screen_name;break;case "yahoo":d=c.nickname;break;case "instagram":useranme=c.username;break;case "wordpress":useranme=c.username;break;case "vimeo":useranme=c.username;break;case "reddit":d=c.name;break;case "soundcloud":d=c.username}e[service]="undefined"!==typeof d&&""!==d?d:null}return e};b.getProfileDescriptions=function(){var a=b.getUnifiedProfiles(),
c,d,e={};for(service in a){c=a[service];d=null;if(null!==c)switch(service){case "github":d=c.bio;break;case "linkedin":d=c.headline;break;case "twitter":d=c.description;break;case "instagram":d=c.bio;break;case "vimeo":d=c.bio;break;case "soundcloud":d=c.description}e[service]="undefined"!==typeof d&&""!==d?d:null}return e};b.getProfileLocations=function(){var a=b.getUnifiedProfiles(),c,d,e={};for(service in a){c=a[service];d=null;if(null!==c)switch(service){case "facebook":d="undefined"!==typeof c.location&&
null!==c.location&&"undefined"!==typeof c.location.name?c.location.name:null;break;case "foursquare":d=c.homeCity;break;case "github":d=c.location;break;case "google":if("undefined"!==typeof c.placesLived)for(var f=0,h=c.placesLived.length,l;f<h;f+=1)l=c.placesLived[f],!0===l.primary&&(d=l.value);break;case "linkedin":d="undefined"===typeof c.location?null:c.location.name;break;case "twitter":d=c.location;break;case "vimeo":d=c.location;break;case "soundcloud":d=c.city||c.country}e[service]="undefined"!==
typeof d&&""!==d?d:null}return e};b.getProfileLocales=function(){var a=b.getUnifiedProfiles(),c,d,e={};for(service in a){c=a[service];d=null;if(null!==c)switch(service){case "facebook":d=c.locale;break;case "windows":d=c.locale}e[service]="undefined"!==typeof d&&""!==d?d:null}return e};b.unifyOptionsAttributes=function(a){var c=b.getActiveServices(),d=!1,e,f,h={},l={},m={},q;f=0;var p=c.length;for(e in a)for(attr2 in a[e])if("undefined"===typeof h[attr2]&&(h[attr2]={}),f=a[e][attr2],null!==f&&(h[attr2][f]=
"undefined"===typeof h[f]?1:h[f]+1,"undefined"===typeof m[attr2]||h[attr2][f]>m[attr2]))m[attr2]=h[attr2][f];for(q in m)1<m[q]&&(d=!0);if(!0===d)for(e in h)m[e]===max[e]&&(l[attr2]=max[e]);else for(e in m)for(f=0;f<p;f+=1)d=c[f],null===a[d]||"undefined"===typeof a[d][e]||null===a[d][e]||"undefined"!==typeof l[e]&&null!==l[e]||(l[e]=a[d][e]);return l};b.unifyOptions=function(a){var c=b.getActiveServices(),d=!1,e,f,h={},l=0,m=null;f=0;var q=c.length;for(e in a)f=a[e],h[f]="undefined"===typeof h[f]?
1:h[f]+1,h[f]>l&&(l=h[f],m=e);1<l&&(d=!0);if(!0===d)for(f=0;f<q;f+=1)if(d=c[f],null!==a[d]&&"undefined"!==typeof a[d]&&d===m)return a[d];for(f=0;f<q;f+=1)if(d=c[f],null!==a[d]&&"undefined"!==typeof a[d])return a[d];return null};b.removeNulls=function(a){var b={},d;for(d in a)"undefined"!==typeof a[d]&&null!==a[d]&&(b[d]=a[d]);return b};b.getUnifiedProfile=function(){return{ids:b.removeNulls(b.getProfileIds()),profiles:b.removeNulls(b.getProfileURLs()),username:b.unifyOptions(b.getProfileUsernames()),
email:b.unifyOptions(b.getProfileEmails()),name:b.unifyOptionsAttributes(b.getProfileNames()),birthdate:b.unifyOptionsAttributes(b.getProfileBirthdates()),gender:b.unifyOptions(b.getProfileGenders()),image:b.unifyOptions(b.getProfileImages()),location:b.unifyOptions(b.getProfileLocations()),locale:b.unifyOptions(b.getProfileLocales()),description:b.unifyOptions(b.getProfileDescriptions()),url:b.unifyOptions(b.getProfilePersonalURLs())}};b.getUnifiedOptions=function(){return{ids:b.getProfileIds(),
profiles:b.getProfileURLs(),username:b.getProfileUsernames(),email:b.getProfileEmails(),name:b.getProfileNames(),birthdate:b.getProfileBirthdates(),gender:b.getProfileGenders(),image:b.getProfileImages(),location:b.getProfileLocations(),locale:b.getProfileLocales(),description:b.getProfileDescriptions(),url:b.getProfilePersonalURLs()}};b.getUnifiedProfiles=function(){for(var a=b.getActiveServices(),c=0,d=a.length,e,f={},c=0;c<d;c+=1)e=a[c],f[e]=b.getProfile(e);return f};b.do_logout=function(a){return b.unsession(a)};
b.unsession=function(a){if(f.prototype.disabled(a))return!1;var c={action:"logout",service:a};c.access_token=b.getAccessToken(a);null!==c.access_token&&"undefined"!==typeof c.access_token&&b.api.request(c);b.storage.local["delete"](a+"_access_token");b.storage.local["delete"](a+"_profile")};b.do_login=function(a){return b.session(a)};b.session=function(a){if(f.prototype.disabled(a))return!1;b.api.request({action:"login",service:a})};b.do_confirm=function(a,c){if(f.prototype.disabled(a))return!1;c.action=
"confirm";c.service=a;b.api.request(c)};b.proxy=function(a,c,d,e,g,h){if(f.prototype.disabled(a))return!1;var l=b.getAccessToken(a),m=b.getAccessTokenSecret(a);b.api.request({action:"proxy",service:a,url:c,method:e,success:function(a){"function"===typeof d&&d.apply(this,[null,a])},error:function(a){"function"===typeof d&&d.apply(this,[a,null])},access_token:l,access_token_secret:m,body:g,type:h})};b.instagram.handle_confirm=function(a){var c=null;a.profile&&(c=a.profile||{},c.service="instagram",
b.publish("profile",{service:"instagram",data:c}),b.setProfile("instagram",c));if(a=a.access_token)b.storage.local.set("instagram_access_token",a),b.publish("sessioned",{service:"instagram",oauth_token:a,profile:c})};b.facebook.handle_confirm=function(a){var c=null;a.profile&&(c=a.profile||{},c.service="facebook",b.publish("profile",{service:"facebook",data:c}),b.setProfile("facebook",c));if(a=a.access_token)b.storage.local.set("facebook_access_token",a),b.publish("sessioned",{service:"facebook",
oauth_token:a,profile:c})};b.foursquare.handle_confirm=function(a){var c=null;a.profile&&(c=a.profile||{},c.service="foursquare",b.publish("profile",{service:"foursquare",data:c}),b.setProfile("foursquare",c));if(a=a.access_token)b.storage.local.set("foursquare_access_token",a),b.publish("sessioned",{service:"foursquare",oauth_token:a,profile:c})};b.soundcloud.handle_confirm=function(a){var c=null;console.log("confirming soundcloud",a);a.profile&&(c=a.profile||{},c.service="soundcloud",b.publish("profile",
{service:"soundcloud",data:c}),b.setProfile("soundcloud",c));var d=a.access_token;a=a.refresh_token;d&&(b.storage.local.set("soundcloud_access_token",d),b.storage.local.set("soundcloud_refresh_token",a),b.publish("sessioned",{service:"soundcloud",oauth_token:d,profile:c}))};b.wordpress.handle_confirm=function(a){var c=null;a.profile&&(c=a.profile||{},c.service="wordpress",b.publish("profile",{service:"wordpress",data:c}),b.setProfile("wordpress",c));if(a=a.access_token)b.storage.local.set("wordpress_access_token",
a),b.publish("sessioned",{service:"wordpress",oauth_token:a,profile:c})};b.google.handle_confirm=function(a){var c=null;a.profile&&(c=a.profile||{},c.service="google",b.publish("profile",{service:"google",data:c}),b.setProfile("google",c));if(a=a.access_token)b.storage.local.set("google_access_token",a),b.publish("sessioned",{service:"google",oauth_token:a,profile:c})};b.youtube.handle_confirm=function(a){var c=null;a.profile&&(c=a.profile||{},c.service="youtube",b.publish("profile",{service:"youtube",
data:c}),b.setProfile("youtube",c));if(a=a.access_token)b.storage.local.set("youtube_access_token",a),b.publish("sessioned",{service:"youtube",oauth_token:a,profile:c})};b.blogger.handle_confirm=function(a){var c=null;a.profile&&(c=a.profile||{},c.service="blogger",b.publish("profile",{service:"blogger",data:c}),b.setProfile("blogger",c));if(a=a.access_token)b.storage.local.set("blogger_access_token",a),b.publish("sessioned",{service:"blogger",oauth_token:a,profile:c})};b.twitter.handle_confirm=function(a){var c=
null;a.profile&&(c=a.profile||{},c.service="twitter",b.publish("profile",{service:"twitter",data:c}),b.setProfile("twitter",c));var d=a.access_token;a=a.access_token_secret;d&&(b.storage.local.set("twitter_access_token",d),b.storage.local.set("twitter_access_token_secret",a),b.publish("sessioned",{service:"twitter",oauth_token:d,oauth_secret:a,profile:c}))};b.evernote.handle_confirm=function(a){var c=null;a.profile&&(c=a.profile||{},c.service="evernote",b.publish("profile",{service:"evernote",data:c}),
b.setProfile("evernote",c));var d=a.access_token;a=a.access_token_secret;d&&(b.storage.local.set("evernote_access_token",d),b.storage.local.set("evernote_access_token_secret",a),b.publish("sessioned",{service:"evernote",oauth_token:d,oauth_secret:a,profile:c}))};b.reddit.handle_confirm=function(a){var c=null;a.profile&&(c=a.profile||{},c.service="reddit",b.publish("profile",{service:"reddit",data:c}),b.setProfile("reddit",c));console.log("confirming reddit",a.access_token,a);if(a=a.access_token)b.storage.local.set("reddit_access_token",
a),b.publish("sessioned",{service:"reddit",oauth_token:a,profile:c})};b.facebook.account_request=function(a){"undefined"!==typeof a.logout_url||"undefined"!==typeof a.logout?null===a.logout_url?(b.publish("unsession",{service:"facebook"}),b.unsession("facebook"),b.state.replaceCurrent(b.redirectTo.replace(":service","facebook"))):(b.publish("unsession_redirect",{service:"facebook",url:a.logout_url}),b.publish("redirect",{service:"facebook",url:a.logout_url}),window.location=a.logout_url):"facebook"===
a.service&&"undefined"!==typeof a.login_url?(b.publish("session_redirect",{service:"facebook",url:a.login_url}),b.publish("redirect",{service:"facebook",url:a.login_url}),window.location=a.login_url):"facebook"===a.service&&"authorized"===a.status&&"undefined"===typeof a.connect_status?(b.publish("confirm",{service:"facebook"}),b.facebook.handle_confirm(a)):"facebook"===a.service&&"undefined"!==typeof a.connect_status?"connected"===a.connect_status?b.publish("confirmed",{service:"facebook"}):b.unsession("facebook"):
"facebook"===a.service&&"unauthorized"===a.account_status&&(b.unsession("facebook"),b.state.replaceCurrent(b.redirectTo.replace(":service","facebook")))};b.foursquare.account_request=function(a){"undefined"!==typeof a.logout_url?(b.publish("unsession",{service:"foursquare"}),b.unsession("foursquare"),b.state.replaceCurrent(b.redirectTo.replace(":service","foursquare"))):"foursquare"===a.service&&"undefined"!==typeof a.login_url?(b.publish("session_redirect",{service:"foursquare",url:a.login_url}),
b.publish("redirect",{service:"foursquare",url:a.login_url}),window.location=a.login_url):"foursquare"===a.service&&"authorized"===a.status&&"undefined"===typeof a.connect_status?(b.publish("confirm",{service:"foursquare"}),b.foursquare.handle_confirm(a)):"foursquare"===a.service&&"account"===a.response_type&&"undefined"!==typeof a.connect_status?"connected"===a.connect_status?b.publish("confirmed",{service:"foursquare"}):b.unsession("foursquare"):"foursquare"===a.service&&"unauthorized"===a.account_status&&
(b.unsession("foursquare"),b.state.replaceCurrent(b.redirectTo.replace(":service","foursquare")))};b.blogger.account_request=function(a){"undefined"!==typeof a.logout_url?(b.publish("unsession",{service:"blogger"}),b.unsession("blogger"),b.state.replaceCurrent(b.redirectTo.replace(":service","blogger"))):"blogger"===a.service&&"undefined"!==typeof a.login_url?(b.publish("session_redirect",{service:"blogger",url:a.login_url}),b.publish("redirect",{service:"blogger",url:a.login_url}),window.location=
a.login_url):"blogger"===a.service&&"authorized"===a.status&&"undefined"===typeof a.connect_status?(b.publish("confirm",{service:"blogger"}),b.blogger.handle_confirm(a)):"blogger"===a.service&&"authorized"===a.status?"connected"===a.connect_status?b.publish("confirmed",{service:"blogger"}):b.unsession("blogger"):"blogger"===a.service&&"unauthorized"===a.account_status&&(b.unsession("blogger"),b.state.replaceCurrent(b.redirectTo.replace(":service","blogger")))};b.youtube.account_request=function(a){"undefined"!==
typeof a.logout_url?(b.publish("unsession",{service:"youtube"}),b.unsession("youtube"),b.state.replaceCurrent(b.redirectTo.replace(":service","youtube"))):"youtube"===a.service&&"undefined"!==typeof a.login_url?(b.publish("session_redirect",{service:"youtube",url:a.login_url}),b.publish("redirect",{service:"youtube",url:a.login_url}),window.location=a.login_url):"youtube"===a.service&&"authorized"===a.status&&"undefined"===typeof a.connect_status?(b.publish("confirm",{service:"youtube"}),b.youtube.handle_confirm(a)):
"youtube"===a.service&&"authorized"===a.status?"connected"===a.connect_status?b.publish("confirmed",{service:"youtube"}):b.unsession("youtube"):"youtube"===a.service&&"unauthorized"===a.account_status&&(b.unsession("youtube"),b.state.replaceCurrent(b.redirectTo.replace(":service","youtube")))};b.google.account_request=function(a){"undefined"!==typeof a.logout_url?(b.publish("unsession",{service:"google"}),b.unsession("google"),b.state.replaceCurrent(b.redirectTo.replace(":service","google"))):"google"===
a.service&&"undefined"!==typeof a.login_url?(b.publish("session_redirect",{service:"google",url:a.login_url}),b.publish("redirect",{service:"google",url:a.login_url}),window.location=a.login_url):"google"===a.service&&"authorized"===a.status&&"undefined"===typeof a.connect_status?(b.publish("confirm",{service:"google"}),b.google.handle_confirm(a)):"google"===a.service&&"authorized"===a.status?"connected"===a.connect_status?b.publish("confirmed",{service:"google"}):b.unsession("google"):"google"===
a.service&&"unauthorized"===a.account_status&&(b.unsession("google"),b.state.replaceCurrent(b.redirectTo.replace(":service","google")))};b.yahoo.handle_confirm=function(a){var c=null;a.profile&&(c=a.profile||{},c.service="yahoo",b.publish("profile",{service:"yahoo",data:c}),b.setProfile("yahoo",c));var d=a.access_token;a=a.access_token_secret;d&&(b.storage.local.set("yahoo_access_token",d),b.storage.local.set("yahoo_access_token_secret",a),b.publish("sessioned",{service:"yahoo",oauth_token:d,oauth_secret:a,
profile:c}))};b.linkedin.handle_confirm=function(a){var c=null;a.profile&&(c=a.profile||{},c.service="linkedin",b.publish("profile",{service:"linkedin",data:c}),b.setProfile("linkedin",c));var d=a.access_token;a=a.access_token_secret;d&&(b.storage.local.set("linkedin_access_token",d),b.storage.local.set("linkedin_access_token_secret",a),b.publish("sessioned",{service:"linkedin",oauth_token:d,oauth_secret:a,profile:c}))};b.vimeo.handle_confirm=function(a,c,d){var e;a.profile&&(e=a.profile||{},e.service=
"vimeo",b.publish("profile",{service:"vimeo",data:e}),b.setProfile("vimeo",e));console.log("CONFIRM VIMEO",a);c=a.access_token;a=a.access_token_secret;c&&(b.storage.local.set("vimeo_access_token",c),b.storage.local.set("vimeo_access_token_secret",a),b.publish("sessioned",{service:"vimeo",oauth_token:c,oauth_secret:a,profile:e}))};b.tumblr.handle_confirm=function(a,c,d){var e;a.profile&&(e=a.profile||{},e.service="tumblr",b.publish("profile",{service:"tumblr",data:e}),b.setProfile("tumblr",e));c=a.access_token;
a=a.access_token_secret;c&&(b.storage.local.set("tumblr_access_token",c),b.storage.local.set("tumblr_access_token_secret",a),b.publish("sessioned",{service:"tumblr",oauth_token:c,oauth_secret:a,profile:e}))};b.windows.handle_confirm=function(a){if(a.profile){var c=a.profile||{};c.service="windows";b.publish("profile",{service:"windows",data:c});b.setProfile("windows",c)}if(a=a.access_token)b.publish("sessioned",{service:"windows",oauth_token:a,profile:c}),b.storage.local.set("windows_access_token",
a)};b.github.handle_confirm=function(a){if(a.profile){var c=a.profile||{};c.service="github";b.publish("profile",{service:"github",data:c});b.setProfile("github",c)}if(a=a.access_token)b.publish("sessioned",{service:"github",oauth_token:a,profile:c}),b.storage.local.set("github_access_token",a)};b.twitter.handle_confirm=function(a){var c=null;a.profile&&(c=a.profile||{},c.service="twitter",b.publish("profile",{service:"twitter",data:c}),b.setProfile("twitter",c));var d=a.access_token;a=a.access_token_secret;
d&&(b.storage.local.set("twitter_access_token",d),b.storage.local.set("twitter_access_token_secret",a),b.publish("sessioned",{service:"twitter",oauth_token:d,oauth_secret:a,profile:c}))};b.confirm=function(){b.utilities.getUrlVars();var a=b.storage.local.get("facebook_code");"undefined"!==typeof a&&null!==a&&(b.publish("verifying",{service:"facebook",code:a}),b.do_confirm("facebook",{code:a}),b.storage.local["delete"]("facebook_code"));var a=b.storage.local.get("twitter_oauth_request_token"),c=b.storage.local.get("twitter_oauth_request_verifier");
"undefined"!==typeof a&&null!==a&&"undefined"!==typeof c&&null!==c&&(b.publish("verifying",{service:"twitter",oauth_token:a,oauth_verifier:c}),b.do_confirm("twitter",{oauth_token:a,oauth_verifier:c}),b.storage.local["delete"]("twitter_oauth_request_token"),b.storage.local["delete"]("twitter_oauth_request_verifier"));a=b.storage.local.get("foursquare_code");"undefined"!==typeof a&&null!==a&&(b.publish("verifying",{service:"foursquare",code:a}),b.do_confirm("foursquare",{code:a}),b.storage.local["delete"]("foursquare_code"));
a=b.storage.local.get("google_code");"undefined"!==typeof a&&null!==a&&(b.publish("verifying",{service:"google",code:a}),b.do_confirm("google",{code:a}),b.storage.local["delete"]("google_code"));a=b.storage.local.get("blogger_code");"undefined"!==typeof a&&null!==a&&(b.publish("verifying",{service:"blogger",code:a}),b.do_confirm("blogger",{code:a}),b.storage.local["delete"]("blogger_code"));a=b.storage.local.get("youtube_code");"undefined"!==typeof a&&null!==a&&(b.publish("verifying",{service:"youtube",
code:a}),b.do_confirm("youtube",{code:a}),b.storage.local["delete"]("youtube_code"));a=b.storage.local.get("windows_code");"undefined"!==typeof a&&null!==a&&(b.publish("verifying",{service:"windows",code:a}),b.do_confirm("windows",{code:a}),b.storage.local["delete"]("windows_code"));a=b.storage.local.get("github_code");"undefined"!==typeof a&&null!==a&&(b.publish("verifying",{service:"github",code:a}),b.do_confirm("github",{code:a}),b.storage.local["delete"]("github_code"));c=b.storage.local.get("instagram_code");
"undefined"!==typeof c&&null!==c&&(b.publish("verifying",{service:"instagram",code:c}),b.do_confirm("instagram",{code:c}),b.storage.local["delete"]("instagram_code"));c=b.storage.local.get("soundcloud_code");"undefined"!==typeof c&&null!==c&&(b.publish("verifying",{service:"soundcloud",code:a}),b.do_confirm("soundcloud",{code:c}),b.storage.local["delete"]("soundcloud_code"));c=b.storage.local.get("wordpress_code");"undefined"!==typeof c&&null!==c&&(b.publish("verifying",{service:"wordpress",code:a}),
b.do_confirm("wordpress",{code:c}),b.storage.local["delete"]("wordpress_code"));c=b.storage.local.get("reddit_code");"undefined"!==typeof c&&null!==c&&(b.publish("verifying",{service:"reddit",code:a}),b.do_confirm("reddit",{code:c}),b.storage.local["delete"]("reddit_code"));var a=b.storage.local.get("tumblr_oauth_request_token"),c=b.storage.local.get("tumblr_oauth_request_token_secret"),d=b.storage.local.get("tumblr_oauth_request_verifier");"undefined"!==typeof a&&null!==a&&"undefined"!==typeof d&&
null!==d&&(b.publish("verifying",{service:"tumblr",oauth_token:a,oauth_verifier:d}),b.do_confirm("tumblr",{oauth_token:a,oauth_token_secret:c,oauth_verifier:d}),b.storage.local["delete"]("tumblr_oauth_request_token"),b.storage.local["delete"]("tumblr_oauth_request_token_secret"),b.storage.local["delete"]("tumblr_oauth_request_verifier"));a=b.storage.local.get("vimeo_oauth_request_token");c=b.storage.local.get("vimeo_oauth_request_token_secret");d=b.storage.local.get("vimeo_oauth_request_verifier");
"undefined"!==typeof a&&null!==a&&"undefined"!==typeof d&&null!==d&&(b.publish("verifying",{service:"tumblr",oauth_token:a,oauth_verifier:d}),b.do_confirm("vimeo",{oauth_token:a,oauth_token_secret:c,oauth_verifier:d}),b.storage.local["delete"]("vimeo_oauth_request_token"),b.storage.local["delete"]("vimeo_oauth_request_token_secret"),b.storage.local["delete"]("vimeo_oauth_request_verifier"));a=b.storage.local.get("yahoo_oauth_request_token");c=b.storage.local.get("yahoo_oauth_request_token_secret");
d=b.storage.local.get("yahoo_oauth_request_verifier");"undefined"!==typeof a&&null!==a&&"undefined"!==typeof d&&null!==d&&(b.publish("verifying",{service:"yahoo",oauth_token:a,oauth_verifier:d}),b.do_confirm("yahoo",{oauth_token:a,oauth_token_secret:c,oauth_verifier:d}),b.storage.local["delete"]("yahoo_oauth_request_token"),b.storage.local["delete"]("yahoo_oauth_request_token_secret"),b.storage.local["delete"]("yahoo_oauth_request_verifier"));a=b.storage.local.get("linkedin_oauth_request_token");
c=b.storage.local.get("linkedin_oauth_request_token_secret");d=b.storage.local.get("linkedin_oauth_request_verifier");"undefined"!==typeof a&&null!==a&&"undefined"!==typeof d&&null!==d&&(b.publish("verifying",{service:"linkedin",oauth_token:a,oauth_verifier:d}),b.do_confirm("linkedin",{oauth_token:a,oauth_token_secret:c,oauth_verifier:d}),b.storage.local["delete"]("linkedin_oauth_request_token"),b.storage.local["delete"]("linkedin_oauth_request_token_secret"),b.storage.local["delete"]("linkedin_oauth_request_verifier"));
a=b.storage.local.get("evernote_oauth_request_token");c=b.storage.local.get("evernote_oauth_request_token_secret");d=b.storage.local.get("evernote_oauth_request_verifier");"undefined"!==typeof a&&null!==a&&"undefined"!==typeof d&&null!==d&&(b.publish("verifying",{service:"evernote",oauth_token:a,oauth_verifier:d}),b.do_confirm("evernote",{oauth_token:a,oauth_token_secret:c,oauth_verifier:d}),b.storage.local["delete"]("evernote_oauth_request_token"),b.storage.local["delete"]("evernote_oauth_request_token_secret"),
b.storage.local["delete"]("evernote_oauth_request_verifier"))};b.detectLogin=function(a){a=b.utilities.getUrlVars();"undefined"!==typeof a.code&&"facebook"===a.service&&(b.storage.local.set("facebook_code",a.code),b.publish("verified",{service:"facebook",code:a.code}),b.state.replaceCurrent(b.redirectTo.replace(":service","facebook")));"undefined"!==typeof a.oauth_token&&"undefined"!==typeof a.oauth_verifier&&("tumblr"===a.service?(b.storage.local.set("tumblr_oauth_request_token",a.oauth_token),b.storage.local.set("tumblr_oauth_request_verifier",
a.oauth_verifier),b.publish("verified",{service:"tumblr",oauth_token:a.oauth_token,oauth_verifier:a.oauth_verifier,oauth_token_secret:a.oauth_token_secret}),b.state.replaceCurrent(b.redirectTo.replace(":service","tumblr"))):"yahoo"===a.service?(b.storage.local.set("yahoo_oauth_request_token",a.oauth_token),b.storage.local.set("yahoo_oauth_request_verifier",a.oauth_verifier),b.publish("verified",{service:"yahoo",oauth_token:a.oauth_token,oauth_verifier:a.oauth_verifier}),b.state.replaceCurrent(b.redirectTo.replace(":service",
"yahoo"))):"linkedin"===a.service?(b.storage.local.set("linkedin_oauth_request_token",a.oauth_token),b.storage.local.set("linkedin_oauth_request_verifier",a.oauth_verifier),b.publish("verified",{service:"linkedin",oauth_token:a.oauth_token,oauth_verifier:a.oauth_verifier}),b.state.replaceCurrent(b.redirectTo.replace(":service","linkedin"))):"vimeo"===a.service?(b.storage.local.set("vimeo_oauth_request_token",a.oauth_token),b.storage.local.set("vimeo_oauth_request_verifier",a.oauth_verifier),b.publish("verified",
{service:"vimeo",oauth_token:a.oauth_token,oauth_verifier:a.oauth_verifier,oauth_token_secret:a.oauth_token_secret}),b.state.replaceCurrent(b.redirectTo.replace(":service","vimeo"))):"evernote"===a.service?(b.storage.local.set("evernote_oauth_request_token",a.oauth_token),b.storage.local.set("evernote_oauth_request_verifier",a.oauth_verifier),b.publish("verified",{service:"evernote",oauth_token:a.oauth_token,oauth_verifier:a.oauth_verifier,oauth_token_secret:a.oauth_token_secret}),b.state.replaceCurrent(b.redirectTo.replace(":service",
"evernote"))):(b.storage.local.set("twitter_oauth_request_token",a.oauth_token),b.storage.local.set("twitter_oauth_request_verifier",a.oauth_verifier),b.publish("verified",{service:"twitter",oauth_token:a.oauth_token,oauth_verifier:a.oauth_verifier}),b.state.replaceCurrent(b.redirectTo.replace(":service","twitter"))));"undefined"!==typeof a.logout&&"undefined"!==typeof a.service&&"facebook"===a.service&&b.facebook.account_request(a);"undefined"!==typeof a.code&&"windows"===a.service&&(b.storage.local.set("windows_code",
a.code),b.publish("verified",{service:"windows",code:a.code}),b.state.replaceCurrent(b.redirectTo.replace(":service","windows")));"undefined"!==typeof a.code&&"github"===a.service&&(b.storage.local.set("github_code",a.code),b.publish("verified",{service:"github",code:a.code}),b.state.replaceCurrent(b.redirectTo.replace(":service","github")));"undefined"!==typeof a.code&&"foursquare"===a.service&&(b.storage.local.set("foursquare_code",a.code),b.publish("verified",{service:"foursquare",code:a.code}),
b.state.replaceCurrent(b.redirectTo.replace(":service","foursquare")));"undefined"!==typeof a.code&&"google"===a.service&&(b.storage.local.set("google_code",a.code),b.publish("verified",{service:"google",code:a.code}),b.state.replaceCurrent(b.redirectTo.replace(":service","google")));"undefined"!==typeof a.code&&"instagram"===a.service&&(b.storage.local.set("instagram_code",a.code),b.publish("verified",{service:"instagram",code:a.code}),b.state.replaceCurrent(b.redirectTo.replace(":service","instagram")));
"undefined"!==typeof a.code&&"soundcloud"===a.service&&(b.storage.local.set("soundcloud_code",a.code),b.publish("verified",{service:"soundcloud",code:a.code}),b.state.replaceCurrent(b.redirectTo.replace(":service","soundcloud")));"undefined"!==typeof a.code&&"wordpress"===a.service&&(b.storage.local.set("wordpress_code",a.code),b.publish("verified",{service:"wordpress",code:a.code}),b.state.replaceCurrent(b.redirectTo.replace(":service","wordpress")));"undefined"!==typeof a.code&&"reddit"===a.service&&
(b.storage.local.set("reddit_code",a.code),b.publish("verified",{service:"reddit",code:a.code}),b.state.replaceCurrent(b.redirectTo.replace(":service","reddit")));"undefined"!==typeof a.code&&"youtube"===a.service&&(b.storage.local.set("youtube_code",a.code),b.publish("verified",{service:"youtube",code:a.code}),b.state.replaceCurrent(b.redirectTo.replace(":service","youtube")));"undefined"!==typeof a.code&&"blogger"===a.service&&(b.storage.local.set("blogger_code",a.code),b.publish("verified",{service:"blogger",
code:a.code}),b.state.replaceCurrent(b.redirectTo.replace(":service","blogger")))};b.login_statuses=function(){var a={facebook:"facebook_access_token",twitter:"twitter_access_token",google:"google_access_token",foursquare:"foursquare_access_token",github:"github_access_token",yahoo:"yahoo_access_token",tumblr:"tumblr_access_token",linkedin:"linkedin_access_token",windows:"windows_access_token",instagram:"instagram_access_token",wordpress:"wordpress_access_token",vimeo:"wordpress_access_token",blogger:"blogger_access_token",
youtube:"youtube_access_token",evernote:"evernote_access_token",reddit:"reddit_access_token",soundcloud:"soundcloud_access_token"},c={};for(service in a){var d=b.storage.session.get(a[service]);c[service]="undefined"!==typeof d&&null!==d&&""!==d?!0:!1}b.publish("status",{status:c});return c};b.yahoo.account_request=function(a){"undefined"!==typeof a.logout_url?(b.publish("unsession",{service:"yahoo"}),b.unsession("yahoo"),b.state.replaceCurrent(b.redirectTo)):"yahoo"===a.service&&"undefined"!==typeof a.login_url?
(b.storage.local.set("yahoo_oauth_request_token",a.request_token),b.storage.local.set("yahoo_oauth_request_token_secret",a.request_token_secret),b.publish("session_redirect",{service:"yahoo",url:a.login_url}),b.publish("redirect",{service:"yahoo",url:a.login_url}),window.location=a.login_url):"yahoo"===a.service&&"undefined"!==typeof a.connect_status?"connected"===a.connect_status&&b.publish("confirmed",{service:"yahoo"}):"yahoo"===a.service&&"authorized"===a.status&&"authorized"===a.status?(b.publish("confirm",
{service:"yahoo"}),b.yahoo.handle_confirm(a)):"yahoo"===a.service&&"unauthorized"===a.account_status&&b.state.replaceCurrent(b.redirectTo)};b.windows.account_request=function(a){"undefined"!==typeof a.logout_url?(b.publish("unsession",{service:"windows"}),b.unsession("windows"),b.state.replaceCurrent(b.redirectTo)):"windows"===a.service&&"undefined"!==typeof a.login_url?(b.storage.local.set("windows_oauth_request_token",a.request_token),b.storage.local.set("windows_oauth_request_token_secret",a.request_token_secret),
b.publish("session_redirect",{service:"windows",url:a.login_url}),b.publish("redirect",{service:"windows",url:a.login_url}),window.location=a.login_url):"windows"===a.service&&"undefined"!==typeof a.connect_status?"connected"===a.connect_status&&b.publish("confirmed",{service:"windows"}):"windows"===a.service&&"authorized"===a.status&&"undefined"===typeof a.connect_status?(b.publish("confirm",{service:"windows"}),b.windows.handle_confirm(a)):"windows"===a.service&&"unauthorized"===a.status&&b.state.replaceCurrent(b.redirectTo)};
b.wordpress.account_request=function(a){"undefined"!==typeof a.logout_url?(b.publish("unsession",{service:"wordpress"}),b.unsession("wordpress"),b.state.replaceCurrent(b.redirectTo)):"wordpress"===a.service&&"undefined"!==typeof a.login_url?(b.storage.local.set("wordpress_oauth_request_token",a.request_token),b.storage.local.set("wordpress_oauth_request_token_secret",a.request_token_secret),b.publish("session_redirect",{service:"wordpress",url:a.login_url}),b.publish("redirect",{service:"wordpress",
url:a.login_url}),window.location=a.login_url):"wordpress"===a.service&&"undefined"!==typeof a.connect_status?"connected"===a.connect_status?b.publish("confirmed",{service:"wordpress"}):b.unsession("wordpress"):"wordpress"===a.service&&"authorized"===a.status&&"undefined"===typeof a.connect_status?(b.publish("confirm",{service:"wordpress"}),b.wordpress.handle_confirm(a)):"wordpress"===a.service&&"unauthorized"===a.account_status&&(b.unsession("wordpress"),b.state.replaceCurrent(b.redirectTo))};b.github.account_request=
function(a){"undefined"!==typeof a.logout_url?(b.publish("unsession",{service:"github"}),b.unsession("github"),b.state.replaceCurrent(b.redirectTo)):"github"===a.service&&"undefined"!==typeof a.login_url?(b.storage.local.set("github_oauth_request_token",a.request_token),b.storage.local.set("github_oauth_request_token_secret",a.request_token_secret),b.publish("session_redirect",{service:"github",url:a.login_url}),b.publish("redirect",{service:"github",url:a.login_url}),window.location=a.login_url):
"github"===a.service&&"undefined"!==typeof a.connect_status?"connected"===a.connect_status?b.publish("confirmed",{service:"github"}):b.unsession("github"):"github"===a.service&&"authorized"===a.status&&"undefined"===typeof a.connect_status?(b.publish("confirm",{service:"github"}),b.github.handle_confirm(a)):"github"===a.service&&"unauthorized"===a.account_status&&(b.unsession("github"),b.state.replaceCurrent(b.redirectTo))};b.vimeo.account_request=function(a){"undefined"!==typeof a.logout_url?(b.publish("unsession",
{service:"vimeo"}),b.unsession("vimeo"),b.state.replaceCurrent(b.redirectTo)):"vimeo"===a.service&&"undefined"!==typeof a.login_url?(b.storage.local.set("vimeo_oauth_request_token",a.request_token),b.storage.local.set("vimeo_oauth_request_token_secret",a.request_token_secret),b.publish("session_redirect",{service:"vimeo",url:a.login_url}),b.publish("redirect",{service:"vimeo",url:a.login_url}),window.location=a.login_url):"vimeo"===a.service&&"undefined"!==typeof a.connect_status?"connected"===a.connect_status?
b.publish("confirmed",{service:"vimeo"}):b.unsession("vimeo"):"vimeo"===a.service&&"authorized"===a.status&&"undefined"===typeof a.connect_status?(b.publish("confirm",{service:"vimeo"}),b.vimeo.handle_confirm(a)):"vimeo"===a.service&&"unauthorized"===a.account_status&&(b.unsession("vimeo"),b.state.replaceCurrent(b.redirectTo))};b.tumblr.account_request=function(a){"undefined"!==typeof a.logout_url?(b.publish("unsession",{service:"tumblr"}),b.unsession("tumblr"),b.state.replaceCurrent(b.redirectTo)):
"tumblr"===a.service&&"undefined"!==typeof a.login_url?(b.storage.local.set("tumblr_oauth_request_token",a.request_token),b.storage.local.set("tumblr_oauth_request_token_secret",a.request_token_secret),b.publish("session_redirect",{service:"tumblr",url:a.login_url}),b.publish("redirect",{service:"tumblr",url:a.login_url}),window.location=a.login_url):"tumblr"===a.service&&"undefined"!==typeof a.connect_status?"connected"===a.connect_status?b.publish("confirmed",{service:"tumblr"}):b.unsession("tumblr"):
"tumblr"===a.service&&"authorized"===a.status&&"undefined"===typeof a.connect_status?(b.publish("confirm",{service:"tumblr"}),b.tumblr.handle_confirm(a)):"tumblr"===a.service&&"unauthorized"===a.account_status&&(b.unsession("tumblr"),b.state.replaceCurrent(b.redirectTo))};b.twitter.account_request=function(a){"undefined"!==typeof a.logout_url?(b.publish("unsession",{service:"twitter"}),b.unsession("twitter"),b.state.replaceCurrent(b.redirectTo)):"twitter"===a.service&&"undefined"!==typeof a.login_url?
(b.publish("session_redirect",{service:"twitter",url:a.login_url}),b.publish("redirect",{service:"twitter",url:a.login_url}),window.location=a.login_url):"twitter"===a.service&&"undefined"!==typeof a.connect_status?"connected"===a.connect_status?b.publish("confirmed",{service:"twitter"}):b.unsession("twitter"):"twitter"===a.service&&"authorized"===a.status&&"undefined"===typeof a.connect_status?(b.publish("confirm",{service:"twitter"}),b.twitter.handle_confirm(a)):"twitter"===a.service&&"unauthorized"===
a.account_status&&(b.unsession("twitter"),b.state.replaceCurrent(b.redirectTo))};b.instagram.account_request=function(a){"undefined"!==typeof a.logout_url?(b.publish("unsession",{service:"instagram"}),b.unsession("instagram"),b.state.replaceCurrent(b.redirectTo)):"instagram"===a.service&&"undefined"!==typeof a.login_url?(b.storage.local.set("instagram_oauth_request_token",a.request_token),b.storage.local.set("instagram_oauth_request_token_secret",a.request_token_secret),b.publish("session_redirect",
{service:"instagram",url:a.login_url}),b.publish("redirect",{service:"instagram",url:a.login_url}),window.location=a.login_url):"instagram"===a.service&&"undefined"!==typeof a.connect_status?"connected"===a.connect_status?b.publish("confirmed",{service:"instagram"}):b.unsession("instagram"):"instagram"===a.service&&"authorized"===a.status&&"undefined"===typeof a.connect_status?(b.storage.local.delet("instagram_oauth_request_token"),b.storage.local["delete"]("instagram_oauth_request_token_secret"),
b.publish("confirm",{service:"instagram"}),b.instagram.handle_confirm(a)):"instagram"===a.service&&"unauthorized"===a.account_status&&(b.unsession("instagram"),b.state.replaceCurrent(b.redirectTo))};b.linkedin.account_request=function(a){"undefined"!==typeof a.logout_url?(b.publish("unsession",{service:"linkedin"}),b.unsession("linkedin"),b.state.replaceCurrent(b.redirectTo)):"linkedin"===a.service&&"undefined"!==typeof a.login_url?(b.storage.local.set("linkedin_oauth_request_token",a.request_token),
b.storage.local.set("linkedin_oauth_request_token_secret",a.request_token_secret),b.publish("session_redirect",{service:"linkedin",url:a.login_url}),b.publish("redirect",{service:"linkedin",url:a.login_url}),window.location=a.login_url):"linkedin"===a.service&&"undefined"!==typeof a.connect_status?"connected"===a.connect_status?b.publish("confirmed",{service:"linkedin"}):b.unsession("linkedin"):"linkedin"===a.service&&"authorized"===a.status&&"undefined"===typeof a.connect_status?(b.publish("confirm",
{service:"linkedin"}),b.linkedin.handle_confirm(a)):"linkedin"===a.service&&"unauthorized"===a.account_status&&(b.unsession("linkedin"),b.state.replaceCurrent(b.redirectTo))};b.reddit.account_request=function(a){"undefined"!==typeof a.logout_url?(b.publish("unsession",{service:"reddit"}),b.unsession("reddit"),b.state.replaceCurrent(b.redirectTo)):"reddit"===a.service&&"undefined"!==typeof a.login_url?(b.storage.local.set("reddit_oauth_request_token",a.request_token),b.storage.local.set("reddit_oauth_request_token_secret",
a.request_token_secret),b.publish("session_redirect",{service:"reddit",url:a.login_url}),b.publish("redirect",{service:"reddit",url:a.login_url}),window.location=a.login_url):"reddit"===a.service&&"undefined"!==typeof a.connect_status?"connected"===a.connect_status?b.publish("confirmed",{service:"reddit"}):b.unsession("reddit"):"reddit"===a.service&&"authorized"===a.status&&"undefined"===typeof a.connect_status?(b.publish("confirm",{service:"reddit"}),b.reddit.handle_confirm(a)):"reddit"===a.service&&
"unauthorized"===a.account_status&&(b.unsession("reddit"),b.state.replaceCurrent(b.redirectTo))};b.soundcloud.account_request=function(a){"undefined"!==typeof a.logout_url?(b.publish("unsession",{service:"soundcloud"}),b.unsession("soundcloud"),b.state.replaceCurrent(b.redirectTo)):"soundcloud"===a.service&&"undefined"!==typeof a.login_url?(b.storage.local.set("soundcloud_oauth_request_token",a.request_token),b.storage.local.set("soundcloud_oauth_request_token_secret",a.request_token_secret),b.publish("session_redirect",
{service:"soundcloud",url:a.login_url}),b.publish("redirect",{service:"soundcloud",url:a.login_url}),window.location=a.login_url):"soundcloud"===a.service&&"undefined"!==typeof a.connect_status?"connected"===a.connect_status?b.publish("confirmed",{service:"soundcloud"}):b.unsession("soundcloud"):"soundcloud"===a.service&&"authorized"===a.status&&"undefined"===typeof a.connect_status?(b.publish("confirm",{service:"soundcloud"}),b.soundcloud.handle_confirm(a)):"soundcloud"===a.service&&"unauthorized"===
a.account_status&&(b.unsession("soundcloud"),b.state.replaceCurrent(b.redirectTo))};b.evernote.account_request=function(a){"undefined"!==typeof a.logout_url?(b.publish("unsession",{service:"evernote"}),b.unsession("evernote"),b.state.replaceCurrent(b.redirectTo)):"evernote"===a.service&&"undefined"!==typeof a.login_url?(b.storage.local.set("evernote_oauth_request_token",a.request_token),b.storage.local.set("evernote_oauth_request_token_secret",a.request_token_secret),b.publish("session_redirect",
{service:"evernote",url:a.login_url}),b.publish("redirect",{service:"evernote",url:a.login_url}),window.location=a.login_url):"evernote"===a.service&&"undefined"!==typeof a.connect_status?"connected"===a.connect_status?b.publish("confirmed",{service:"evernote"}):b.unsession("evernote"):"evernote"===a.service&&"authorized"===a.status&&"undefined"===typeof a.connect_status?(b.publish("confirm",{service:"evernote"}),b.evernote.handle_confirm(a)):"evernote"===a.service&&"unauthorized"===a.account_status&&
(b.unsession("evernote"),b.state.replaceCurrent(b.redirectTo))};b.state=b.state||{};b.history=window.history;b.state.replaceCurrent=function(a,c,d){if(null===d||"undefined"===typeof d)d=b.history.getCurrentStateObj;b.history.replaceState(d,c,a)};b.state.push=function(a,c,d){stateUrl="string"!==typeof a&&0<a.length?a.join("/"):a;if(null===d||"undefined"===typeof d)d=b.history.getCurrentStateObj;b.history.pushState(d,c,stateUrl)};b.storage={};b.store=localStorage;b.storage.local={};b.storage.local.set=
function(a,c){"string"!==typeof c&&(c=JSON.stringify(c));return b.store.setItem(b.prefix+"_"+a,c)};b.storage.local["delete"]=function(a){return b.store.removeItem(b.prefix+"_"+a)};b.storage.local.get=function(a){var c=b.store.getItem(b.prefix+"_"+a);try{c=parsed=JSON.parse(b.store.getItem(b.prefix+"_"+a))}catch(d){}return c};b.storage.local.set_batch=function(a){for(item in a)a.hasOwnProperty(item)&&b.storage.local.set(item,a[item])};b.storage.local.delete_batch=function(a){var c;for(c=0;c<=a.length;c+=
1)b.storage.local["delete"](a[c])};b.storage.session={};b.sessionStorage=sessionStorage;b.storage.session.set=function(a,c){return b.sessionStorage.setItem(b.prefix+"_"+a,c)};b.storage.session["delete"]=function(a){return b.sessionStorage.removeItem(b.prefix+"_"+a)};b.storage.session.get=function(a){return b.sessionStorage.getItem(b.prefix+"_"+a)};b.storage.session.set_batch=function(a){for(item in a)a.hasOwnProperty(item)&&b.storage.session.set(item,a[item])};b.storage.session.delete_batch=function(a){var c;
for(c=0;c<=a.length;c+=1)b.storage.session["delete"](a[c])};b.utilities=b.utilities||{};b.utilities.getUrlVars=function(){var a={};("?"+window.document.location.href.split("?").splice(1).join("&").split("#")[0]).replace(/[?&]+([^=&]+)=([^&]*)/gi,function(b,d,e){a[d]=e});return a};b.picked=b.storage.local.get("profile_picks")||{};return f}();